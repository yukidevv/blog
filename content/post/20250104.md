---
title: "LAN内のIPアドレス一覧を取得する方法"
date: 2025-01-04T22:16:34+09:00
draft: false
years: ["2025"]
---
あけおめ一発目。  

長年愛用していたスマホのFingがだいぶ前から改悪されたので、対処するための方法を模索した。  
同一LAN内にブロードキャストを飛ばせとよいと思ったが、大半の機器は応答してくれない。なので、方法としては「Pingスイープを飛ばした後にarpコマンドで確認する」に収まった。Windows前提ではあるが、デフォルト機能で実現出来るので良いと思った。  
デフォルト厨なのだ。  

Pingスイープ用には以下のbatファイルを作成する。  
```
@echo off
for /L %%i in (1,1,100) do ping -n 1 -w 100 192.168.1.%%i >nul
```
要は1~100のホストまでpingを飛ばしているだけ。  
機器がそんなに多いわけでもないので、ここはネットワーク構成次第で可変に。  
/24でMAXホストにPingすると2,3分かかるような気がする。  

batファイルはダブルリックで管理者実行権限出来るようにしておくとよい。  
※これ、batファイルのショートカット作成して、それに管理者実行の権限を付与しないといけないんですかね。。  


batが完了したら、以下のコマンドでIP一覧が取得出来ていると思う。  
```
arp -a
```

FingではIP一覧取得とWake On Lanの機能(今はラズパイ上にお手製の機能を構築)を使用していたが、これでおさらばできる。  
今までありがとうございました。